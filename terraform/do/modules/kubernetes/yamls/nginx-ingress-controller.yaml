# NGINX Ingress Controller Configuration - Variables Only
# This file contains only the sections with variables from nginx-ingress-controller.yaml
# All variables are injected via Terraform templatefile() in nginx_ingress_controller.tf

image:
  registry: docker.io
  repository: bitnamilegacy/nginx-ingress-controller
## =========================
## Replica Count
## =========================
replicaCount: ${replica_count}

## =========================
## Controller Resources
## =========================
resources:
  requests:
    cpu: ${request_cpu}
    memory: ${request_memory}
  limits:
    cpu: ${limit_cpu}
    memory: ${limit_memory}

## =========================
## Node Scheduling
## =========================
nodeSelector: 
  "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Service
## =========================
service:
  annotations:
    service.beta.kubernetes.io/do-loadbalancer-size-unit: "1"
    service.beta.kubernetes.io/do-loadbalancer-type: "REGIONAL_NETWORK"
    service.beta.kubernetes.io/do-loadbalancer-sticky-sessions-type: "cookies"
    service.beta.kubernetes.io/do-loadbalancer-sticky-sessions-cookie-name: "cookie"
    service.beta.kubernetes.io/do-loadbalancer-sticky-sessions-cookie-ttl: "300"

## =========================
## Default Backend Resources
## =========================
defaultBackend:
  replicaCount: ${default_backend_replica_count}
  image:
    registry: docker.io
    repository: bitnamilegacy/nginx
  resources:
    requests:
      cpu: ${default_backend_request_cpu}
      memory: ${default_backend_request_memory}
    limits:
      cpu: ${default_backend_limit_cpu}
      memory: ${default_backend_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}
