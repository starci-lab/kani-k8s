# Kafka Configuration - Variables Only
# This file contains only the sections with variables from kafka.yaml
# All variables are injected via Terraform templatefile() in kafka.tf

image:
  registry: docker.io
  repository: bitnamilegacy/kafka

## =========================
## SASL Authentication
## =========================
sasl:
  client:
    users:
      - ${sasl_user}
    passwords: 
      - ${sasl_password}

## =========================
## Volume Permissions Init Container Resources
## =========================
defaultInitContainers:
  volumePermissions:
    resources:
      requests:
        cpu: ${volume_permissions_request_cpu}
        memory: ${volume_permissions_request_memory}
      limits:
        cpu: ${volume_permissions_limit_cpu}
        memory: ${volume_permissions_limit_memory}

## =========================
## Controller Resources
## =========================
controller:
  controllerOnly: ${controller_only}
  replicaCount: ${controller_replica_count}
  resources: 
    requests:
      cpu: ${controller_request_cpu}
      memory: ${controller_request_memory}
    limits:
      cpu: ${controller_limit_cpu}
      memory: ${controller_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    size: ${controller_persistence_size}
  logPersistence:
    size: ${controller_log_persistence_size}

## =========================
## Broker Resources
## =========================
broker:
  replicaCount: ${broker_replica_count}
  resources:
    requests:
      cpu: ${broker_request_cpu}
      memory: ${broker_request_memory}
    limits:
      cpu: ${broker_limit_cpu}
      memory: ${broker_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    size: ${broker_persistence_size}

## =========================
## Listeners
## =========================
listeners:
  client:
    protocol: "SASL_PLAINTEXT"  # Protocol for client communication
  controller:
    protocol: "SASL_PLAINTEXT"  # Protocol for controller communication
  interbroker:
    protocol: "SASL_PLAINTEXT"  # Protocol for inter-broker communication

## =========================
## Override Configuration
## =========================
overrideConfiguration:
  offsets.topic.replication.factor: "1"
  transaction.state.log.replication.factor: "1"
  transaction.state.log.min.isr: "1"
  default.replication.factor: "1"
  auto.create.topics.enable: "true"
## =========================
## Extra Listeners
## =========================
extraListeners: []

## =========================
## Security Protocol Map
## =========================
securityProtocolMap: "SASL_PLAINTEXT,SASL_SSL,PLAINTEXT,SSL"