## =========================
## Loki image (Bitnami legacy)
## =========================
loki:
  image:
    registry: docker.io
    repository: bitnamilegacy/grafana-loki

## =========================
## Gateway (entry point)
## =========================
gateway:
  enabled: true
  replicaCount: ${gateway_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  resources:
    requests:
      cpu: ${gateway_request_cpu}
      memory: ${gateway_request_memory}
    limits:
      cpu: ${gateway_limit_cpu}
      memory: ${gateway_limit_memory}

## =========================
## Compactor
## =========================
compactor:
  enabled: true
  replicaCount: ${compactor_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    enabled: true
    size: ${compactor_persistence_size}
  resources:
    requests:
      cpu: ${compactor_request_cpu}
      memory: ${compactor_request_memory}
    limits:
      cpu: ${compactor_limit_cpu}
      memory: ${compactor_limit_memory}

## =========================
## Distributor
## =========================
distributor:
  replicaCount: ${distributor_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Ingester
## =========================
ingester:
  replicaCount: ${ingester_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    enabled: true
    size: ${ingester_persistence_size}

## =========================
## Querier
## =========================
querier:
  replicaCount: ${querier_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    enabled: true
    size: ${querier_persistence_size}

## =========================
## Query Frontend
## =========================
queryFrontend:
  replicaCount: ${query_frontend_replica_count}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Grafana Alloy (log collector) â€“ disabled by default
## =========================
grafanaalloy:
  enabled: false
