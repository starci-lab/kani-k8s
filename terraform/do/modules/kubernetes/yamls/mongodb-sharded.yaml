# MongoDB Sharded Configuration - Variables Only
# This file contains only the sections with variables from mongodb-sharded.yaml
# All variables are injected via Terraform templatefile() in mongodb_sharded.tf

image:
  registry: docker.io
  repository: bitnamilegacy/mongodb-sharded

## =========================
## Authentication
## =========================
auth:
  rootUser: ${username}
  rootPassword: ${password}
  replicaSetKey: ${replica_set_key}

## =========================
## Cluster Configuration
## =========================
shards: ${shards}

## =========================
## Config Server Resources
## =========================
configsvr:
  replicaCount: ${configsvr_replica_count}
  resources:
    requests:
      cpu: ${configsvr_request_cpu}
      memory: ${configsvr_request_memory}
    limits:
      cpu: ${configsvr_limit_cpu}
      memory: ${configsvr_limit_memory}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}
  persistence:
    size: ${configsvr_persistence_size}

## =========================
## Mongos Resources
## =========================
mongos:
  replicaCount: ${mongos_replica_count}
  resources:
    requests:
      cpu: ${mongos_request_cpu}
      memory: ${mongos_request_memory}
    limits:
      cpu: ${mongos_limit_cpu}
      memory: ${mongos_limit_memory}
  nodeSelector:
    "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Shard Server Resources
## =========================
shardsvr:
  dataNode:
    replicaCount: ${shardsvr_replica_count}
    resources:
      requests:
        cpu: ${shardsvr_request_cpu}
        memory: ${shardsvr_request_memory}
      limits:
        cpu: ${shardsvr_limit_cpu}
        memory: ${shardsvr_limit_memory}
    nodeSelector:
      "doks.digitalocean.com/node-pool": ${node_pool_label}
    persistence:
      size: ${shardsvr_persistence_size}
  arbiter:
    nodeSelector:
      "doks.digitalocean.com/node-pool": ${node_pool_label}
