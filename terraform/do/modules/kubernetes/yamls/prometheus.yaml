# Prometheus Configuration - Variables Only
# This file contains only the sections with variables from prometheus.yaml
# All variables are injected via Terraform templatefile() in prometheus.tf

## =========================
## Operator Resources
## =========================
operator:
  resources:
    requests:
      cpu: ${operator_request_cpu}
      memory: ${operator_request_memory}
    limits:
      cpu: ${operator_limit_cpu}
      memory: ${operator_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Prometheus Resources
## =========================
prometheus:
  prometheusSpec:
    resources:
      requests:
        cpu: ${prometheus_request_cpu}
        memory: ${prometheus_request_memory}
      limits:
        cpu: ${prometheus_limit_cpu}
        memory: ${prometheus_limit_memory}
    nodeSelector: 
      "doks.digitalocean.com/node-pool": ${node_pool_label}
    storageSpec:
      volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: ${prometheus_persistence_size}
    thanos:
      resources:
        requests:
          cpu: ${thanos_request_cpu}
          memory: ${thanos_request_memory}
        limits:
          cpu: ${thanos_limit_cpu}
          memory: ${thanos_limit_memory}

## =========================
## Alertmanager Resources
## =========================
alertmanager:
  alertmanagerSpec:
    resources:
      requests:
        cpu: ${alertmanager_request_cpu}
        memory: ${alertmanager_request_memory}
      limits:
        cpu: ${alertmanager_limit_cpu}
        memory: ${alertmanager_limit_memory}
    nodeSelector: 
      "doks.digitalocean.com/node-pool": ${node_pool_label}
    storage:
      volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: ${alertmanager_persistence_size}

## =========================
## Blackbox Exporter Resources
## =========================
blackboxExporter:
  resources:
    requests:
      cpu: ${blackbox_exporter_request_cpu}
      memory: ${blackbox_exporter_request_memory}
    limits:
      cpu: ${blackbox_exporter_limit_cpu}
      memory: ${blackbox_exporter_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}

## =========================
## Thanos Ruler Resources
## =========================
thanosRuler:
  storage:
    requests:
      cpu: ${thanos_ruler_request_cpu}
      memory: ${thanos_ruler_request_memory}
    limits:
      cpu: ${thanos_ruler_limit_cpu}
      memory: ${thanos_ruler_limit_memory}
  nodeSelector: 
    "doks.digitalocean.com/node-pool": ${node_pool_label}
